<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>SamLux - متجر شامل</title>
<style>
body {
  font-family: sans-serif;
  margin:0; padding:0;
  background: linear-gradient(-45deg,#ff9a9e,#fad0c4,#fbc2eb,#a18cd1,#fbc2eb);
  background-size:400% 400%;
  animation: gradientBG 12s ease infinite;
}
@keyframes gradientBG {0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

.page{display:none; padding:20px; max-width:600px; margin:auto;}
.active{display:block;}

input, select, textarea, button{width:100%; padding:10px; margin:6px 0; border-radius:6px; border:1px solid #ccc;}
button{cursor:pointer; background:#222; color:white; border:none;}
button:hover{background:#444;}
a{color:#222; cursor:pointer; text-decoration:underline;}

#cartItems li{margin:6px 0; display:flex; justify-content:space-between; align-items:center;}
#cartItems li button{margin-left:6px; padding:4px; background:#f55; border:none; color:#fff; border-radius:4px; cursor:pointer;}

.product{background:rgba(255,255,255,0.9); padding:12px; border-radius:10px; margin:10px 0;}
.cart-item{animation:addToCartAnim 0.36s ease-out;}
@keyframes addToCartAnim{0%{transform:scale(0.95);opacity:0}100%{transform:scale(1);opacity:1;}}

#successMsg{display:none; background:#d4edda; color:#155724; padding:10px; border-radius:6px; margin-top:10px; text-align:center;}
#orderLogo{display:none; text-align:center; margin-top:10px;}
#orderLogo img{max-width:120px;}
</style>
</head>
<body>

<!-- صفحة التسجيل -->
<div id="signupPage" class="page">
  <h2>✍️ إنشاء حساب</h2>
  <input id="signupName" type="text" placeholder="الاسم الكامل" required>
  <input id="signupEmail" type="email" placeholder="البريد الإلكتروني" required>
  <input id="signupPassword" type="password" placeholder="كلمة المرور" required>
  <button onclick="signup()">إنشاء حساب</button>
  <p>لديك حساب؟ <a onclick="showPage('loginPage')">تسجيل دخول</a></p>
</div>

<!-- صفحة تسجيل الدخول -->
<div id="loginPage" class="page">
  <h2>🔐 تسجيل دخول</h2>
  <input id="loginEmail" type="email" placeholder="البريد الإلكتروني" required>
  <input id="loginPassword" type="password" placeholder="كلمة المرور" required>
  <button onclick="login()">دخول</button>
  <p>ليس لديك حساب؟ <a onclick="showPage('signupPage')">إنشاء حساب</a></p>
</div>

<!-- صفحة المتجر -->
<div id="storePage" class="page">
  <header style="display:flex;justify-content:space-between; align-items:center;">
    <h2>🛍️ SamLux</h2>
    <div>
      <span id="welcomeMsg"></span>
      <button onclick="showPage('profilePage')">👤 ملفي</button>
      <button onclick="logout()">🚪 خروج</button>
    </div>
  </header>

  <section id="productsList">
    <div class="product" data-has-size="false">
      <h3 class="p-name">عطر فاخر</h3>
      <p>السعر: <strong class="p-price">50</strong> د.ت</p>
      <label>الكمية:</label>
      <input type="number" class="p-qty" value="1" min="1">
      <button onclick="addToCartFromElem(this)">🛒 أضف للسلة</button>
    </div>

    <div class="product" data-has-size="true">
      <img src="https://github.com/hammamif565-ai/Samlux_accessoire/blob/9d57de3a1e56965089bdbe57a0f412c11294de34/1761168109479.jpg" alt="pull " width="500">
    
      <h3 class="p-name"> pull</h3>
      <p>السعر: <strong class="p-price">35</strong> د.ت</p>
      <label>المقاس:</label>
      <select class="p-size"><option>S</option><option selected>M</option><option>L</option></select>
      <label>اللون:</label>
      <select class="p-color"><option>أسود</option><option>أبيض</option><option>أخضر</option></select>
      <label>الكمية:</label>
      <input type="number" class="p-qty" value="1" min="1">
      <button onclick="addToCartFromElem(this)">🛒 أضف للسلة</button>
    </div>
    
  </section>

  <section>
    <h3>🧾 سلة المشتريات</h3>
    <ul id="cartItems"></ul>
  </section>

  <div class="checkout">
    <form onsubmit="event.preventDefault(); sendOrder();">
      <label>الاسم الكامل:</label>
      <input id="custName" type="text" required>
      <label>العنوان:</label>
      <textarea id="custAddress" required></textarea>
      <label>رقم الهاتف:</label>
      <input id="custPhone" type="text" required>
      <button>📲 إرسال الطلب عبر واتساب</button>
    </form>
    <div id="successMsg">✅ تم إرسال طلبك! سنتواصل معك قريبًا.</div>
    <div id="orderLogo"><img src="logo.png" alt="شعار SamLux"></div>
  </div>

  <section>
    <h3>تواصل معنا</h3>
    <p>📞 واتساب: <a href="https://wa.me/21629659141" target="_blank">+216 29659141</a></p>
    <p>🚚 التوصيل عبر البريد السريع</p>
  </section>
</div>

<!-- صفحة الملف الشخصي -->
<div id="profilePage" class="page">
  <h2>👤 ملفي الشخصي</h2>
  <p id="userName">الاسم: -</p>
  <p id="userEmail">الإيميل: -</p>
  <button onclick="showPage('storePage')">🏬 المتجر</button>
  <button onclick="logout()">🚪 خروج</button>
</div>

<script>
// ====== التنقل بين الصفحات ======
function showPage(pageId){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(pageId).classList.add('active');
}

// ====== تسجيل حساب ======
function signup(){
  const name=document.getElementById('signupName').value.trim();
  const email=document.getElementById('signupEmail').value.trim();
  const pass=document.getElementById('signupPassword').value;
  if(!name||!email||!pass){ alert('املأ جميع الحقول'); return; }
  localStorage.setItem('user', JSON.stringify({name,email,pass}));
  alert('تم إنشاء الحساب ✅');
  showPage('loginPage');
}

// ====== تسجيل دخول ======
function login(){
  const email=document.getElementById('loginEmail').value.trim();
  const pass=document.getElementById('loginPassword').value;
  const user=JSON.parse(localStorage.getItem('user'));
  if(user && email===user.email && pass===user.pass){
    localStorage.setItem('loggedInUser', JSON.stringify(user));
    document.getElementById('welcomeMsg').innerText='مرحبا '+user.name;
    showPage('storePage');
    loadCart();
  } else alert('❌ البريد أو كلمة المرور غير صحيحة');
}

// ====== تسجيل خروج ======
function logout(){
  localStorage.removeItem('loggedInUser');
  showPage('loginPage');
}

// ====== السلة ======
function addToCartFromElem(btn){
  const card=btn.closest('.product');
  const name=card.querySelector('.p-name').innerText;
  const price=parseFloat(card.querySelector('.p-price').innerText);
  const qty=parseInt(card.querySelector('.p-qty').value)||1;
  const hasSize=card.getAttribute('data-has-size')==='true';
  const size=hasSize?card.querySelector('.p-size').value:null;
  const color=hasSize?card.querySelector('.p-color').value:null;
  const item={name,price,qty,size,color};
  const cart=JSON.parse(localStorage.getItem('cart'))||[];
  cart.push(item);
  localStorage.setItem('cart', JSON.stringify(cart));
  alert('تمت إضافة المنتج 🛒');
  loadCart();
}

function loadCart(){
  const cart=JSON.parse(localStorage.getItem('cart'))||[];
  const list=document.getElementById('cartItems');
  list.innerHTML='';
  if(cart.length===0){ list.innerHTML='<li>سلتك فارغة</li>'; return; }
  let total=0;
  cart.forEach((item,idx)=>{
    total += item.price*item.qty;
    const sizeText=item.size?item.size:'بدون مقاس';
    const colorText=item.color?item.color:'بدون لون';
    const li=document.createElement('li');
    li.className='cart-item';
    li.innerHTML=`<span>${item.qty} × ${item.name} (${sizeText}, ${colorText}) - ${item.price} د.ت</span>
                  <button onclick="removeItem(${idx})">❌</button>`;
    list.appendChild(li);
  });
  const liTotal=document.createElement('li');
  liTotal.innerHTML=`<strong>المجموع: ${total.toFixed(2)} د.ت</strong>`;
  list.appendChild(liTotal);
}

function removeItem(idx){
  const cart=JSON.parse(localStorage.getItem('cart'))||[];
  cart.splice(idx,1);
  localStorage.setItem('cart', JSON.stringify(cart));
  loadCart();
}

// ====== إرسال الطلب عبر واتساب ======
function sendOrder(){
  const cart=JSON.parse(localStorage.getItem('cart'))||[];
  if(cart.length===0){ alert('سلتك فارغة'); return; }
  const name=document.getElementById('custName').value.trim();
  const address=document.getElementById('custAddress').value.trim();
  const phone=document.getElementById('custPhone').value.trim();
  if(!name||!address||!phone){ alert('املأ جميع الحقول'); return; }

  let order=`🛍️ طلب جديد من SamLux\n\n👤 الاسم: ${name}\n📍 العنوان: ${address}\n📞 الهاتف: ${phone}\n\n📦 المنتجات:\n`;
  cart.forEach((it,i)=>{
    const s=it.size?it.size:'بدون مقاس';
    const c=it.color?it.color:'بدون لون';
    order+=`${i+1}. ${it.qty} × ${it.name} (${s}, ${c}) - ${it.price} د.ت\n`;
  });

  const waUrl='https://wa.me/21629659141?text='+encodeURIComponent(order);
  window.open(waUrl,'_blank');

  localStorage.removeItem('cart');
  loadCart();
  document.getElementById
  document.getElementById('successMsg').style.display = 'block';
  document.getElementById('orderLogo').style.display = 'block';
  // مسح الحقول
  document.getElementById('custName').value = '';
  document.getElementById('custAddress').value = '';
  document.getElementById('custPhone').value = '';
}

// ====== تحميل الصفحة ======
document.addEventListener('DOMContentLoaded', () => {
  const user = JSON.parse(localStorage.getItem('loggedInUser'));
  if(user){
    document.getElementById('welcomeMsg').innerText = 'مرحبا ' + user.name;
    showPage('storePage');
    loadCart();
    document.getElementById('userName').innerText = 'الاسم: ' + user.name;
    document.getElementById('userEmail').innerText = 'الإيميل: ' + user.email;
  } else {
    showPage('signupPage'); // صفحة افتراضية إذا لم يوجد مستخدم
  }
});
</script>
</body>
</html>
